<h1>AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training</h1>



<h2>Description</h2>
Project for pen-testing practice and vulnerability exploitation, implementing a vulnerable AWS infrastructure using AWSGoat in the cloud.

<h2>Languages and Utilities Used</h2>

- <b>AWS</b> 
- <b>EC2</b>
- <b>IAM</b>
- <b>S3</b>
- <b>Terraform</b>
- <b>DynamoDB</b>
- <b>API Gateway</b>


<h2>Attack Methods</h2>

- <b>Xss</b>
- <b>SQL Injection</b>
- <b>Insecure Direct Object Reference</b>
- <b>Server Side Request Forgery on Lambda Environment</b>
- <b>S3 Misconfigurations</b>
- <b>IAM Privilege Escalations</b>
- <b>ECS Container Breakout</b>

<h2>Program walk-through:</h2>

<p align="center">
Go to https://github.com/ine-labs/AWSGoat and install AWS GOAT, then follow the instructions to fork the repository: <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture1.png>
<br />
<br />
Now in AWS, go to the IAM dashboard and click Users to create a user for this lab (You will need to create an account if you do not have one already).  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture2.png>
<br />
<br />
Click on create user.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture3.png>
<br />
<br />
Add user name and click next.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture4.png>
<br />
<br />
Select add user to a group and add an admin group if you do not have one (You can attach policies directly but this is a bad practice as it will be difficult to manage permissions in the future as more users are added).   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture5.png>
<br />
<br />
Enable administrator access in your admin group under permissions.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture6.png>
<br />
<br />
Next go back and click next to add your new user to the group.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture7.png>
<br />
On the next page click the Create user button.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture8.png>
<br />
<br />  
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture9.png>
<br />
<br />
Now click on the user and click on the Create access key hyperlink. <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture10.png>
<br />
<br />
Select CLI and check the I understand box at the bottom and click next.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture11.png>
<br />
<br />
Give the key a name and click Create access key button.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture12.png>
<br />
<br />
The next screen will look like this:   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture13.png>
<br />
<br />
I as a best practice I will not be showing my access key even though this demo will be deleted. NEVER share your access key with anyone! 
<br />
Be sure to note your Access Key and Secret Access Key. 
<br />
Now back in your GitHub, return to your GOAT and click the Settings tab. Then select the secrets and variables tab from the sidebar, from that drop down select actions. 
 <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture14.png>
<br />
Your next page will look like this:  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture15.png>
<br />
<br />
Select the New Repository Secret button at the bottom. 
On the New Secret page, paste your AWS secret Access Key into the Secret box. 
 <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture16.png>
<br />
<br />
Next place AWS_ACCESS_KEY  into the name field (CASE and SYNTAX SENSITIVE). <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture17.png>
<br />
<br />
Click the Add Secret button.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture18.png>
<br />
<br />
  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture19.png>
<br />
<br />
At the bottom of the page click the New Repository Secret button. 
This time place AWS_SECRET_ACCESS_KEY into the name field and then place your Secret access key created earlier in AWS into the Secret field and click Add Secret button. 
  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture20.png>
<br />
<br />
You will now see two repository secrets if done correctly.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture21.png>
<br />
Now that the appropriate credentials are in place, we are able to deploy AWS GOAT. 
Back on GitHub for your AWS GOAT fork select the Actions tab. 
 <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture22.png>
<br />
<br />
If you have a new account, you will need to enable workflows by clicking the button.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture23.png>
<br />
<br />
Next click on Terraform Apply located on the side bar.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture24.png>
<br />
<br />
Click the Run workflow button and select the appropriate module from the drop down menu. 
Module-1 is a blog and module-2 is a payroll system. Their infrastructures are shown below. I will be utilizing module-1 for this demonstration.
  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture25.png>
<br />
<br />
Module-1:   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture26.png>
<br />
<br />
Module-2:  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture27.png>
<br />
<br />
After selecting the appropriate module, click the Run workflow button.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture28.png>
<br />
<br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture29.png>
<br />
<br />
After a few minutes you will see that the Terraform Apply now has a green check mark next to it. You will need to wait until this happens to proceed. Hover over the words Terraform Apply and click.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture30.png>
<br />
<br />
On the next page click the word Terraform.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture31.png>
<br />
<br />
Your screen will now look like this:   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture32.png>
<br />
<br />
Select Application URL from the list to find the URL for the application. <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture33.png>
<br />
<br />
Click the URL and select login as shown here:    <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture34.png>
<br />
<br />
Next you will need to create an account by clicking get started in the top right corner.   <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture35.png>
<br />
After creating an account. Login.  <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture36.png>
<br />
<br />
Now that you are logged in, and the application is running, you can return to GitHub select attack manuals then select the appropriate module chosen earlier.     <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture37.png>
<br />
<br />
 <br/>
<img src=https://github.com/Dlacey1/AWS-Cloud-Vulnerability-Lab-Hands-On-Security-Training/blob/main/images/Picture38.png>
<br />
<br />
Now, enjoy the lab and practice exploiting these vulnerabilities!   <br/>



<!--
 ```diff
- text in red
+ text in green
! text in orange
# text in gray
@@ text in purple (and bold)@@
```
--!>
